<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Visualization Component</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        secondary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        },
                        dark: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
        
        .tooltip {
            position: absolute;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 12px 16px;
            min-width: 200px;
            z-index: 100;
            transform: translateY(10px);
            opacity: 0;
            transition: opacity 0.2s ease, transform 0.2s ease;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .tooltip.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .tooltip-label {
            font-weight: 600;
            color: #0f172a;
        }
        
        .tooltip-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: #0ea5e9;
        }
        
        .tooltip-diff {
            font-size: 0.875rem;
            color: #10b981;
            font-weight: 500;
        }
        
        .tooltip-diff.down {
            color: #ef4444;
        }
        
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .chart-grid-item {
            background: rgba(15, 23, 42, 0.05);
            border-radius: 4px;
            text-align: center;
            padding: 4px 0;
            font-size: 0.75rem;
            color: #64748b;
        }
        
        .chart-grid-header {
            background: rgba(15, 23, 42, 0.1);
        }
        
        .chart-grid-label {
            font-weight: 600;
            color: #0f172a;
        }
        
        .chart-grid-value {
            color: #0ea5e9;
        }
        
        .chart-grid-diff {
            color: #10b981;
        }
        
        .chart-grid-diff.down {
            color: #ef4444;
        }
        
        .chart-grid-item:hover {
            background: rgba(15, 23, 42, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-4xl bg-white rounded-2xl shadow-xl overflow-hidden">
        <!-- Header -->
        <div class="p-6 bg-gradient-to-r from-primary-700 to-primary-900 text-white">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold">Performance Metrics</h1>
                    <p class="text-primary-200 mt-1">Quarterly sales data visualization</p>
                </div>
                <div class="flex items-center gap-3">
                    <div class="bg-white/20 p-2 rounded-lg">
                        <i class="fas fa-chart-bar text-xl"></i>
                    </div>
                    <div>
                        <p class="text-sm text-primary-200">Last updated: <span class="font-medium">Jun 15, 2023</span></p>
                        <p class="text-xs text-primary-300">Data refreshes daily</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chart Section -->
        <div class="p-6">
            <div class="chart-container">
                <canvas id="barChart"></canvas>
                
                <!-- Grid Lines -->
                <div class="chart-grid">
                    <!-- Grid lines -->
                    <div class="chart-grid-item chart-grid-header">
                        <span class="chart-grid-label">Q1</span>
                    </div>
                    <div class="chart-grid-item chart-grid-header">
                        <span class="chart-grid-label">Q2</span>
                    </div>
                    <div class="chart-grid-item chart-grid-header">
                        <span class="chart-grid-label">Q3</span>
                    </div>
                    <div class="chart-grid-item chart-grid-header">
                        <span class="chart-grid-label">Q4</span>
                    </div>
                    
                    <!-- Data points -->
                    <div class="chart-grid-item">
                        <span class="chart-grid-value">$120K</span>
                    </div>
                    <div class="chart-grid-item">
                        <span class="chart-grid-value">$180K</span>
                    </div>
                    <div class="chart-grid-item">
                        <span class="chart-grid-value">$240K</span>
                    </div>
                    <div class="chart-grid-item">
                        <span class="chart-grid-value">$320K</span>
                    </div>
                    
                    <!-- Diff indicators -->
                    <div class="chart-grid-item">
                        <span class="chart-grid-diff">↑ 25%</span>
                    </div>
                    <div class="chart-grid-item">
                        <span class="chart-grid-diff">↑ 33%</span>
                    </div>
                    <div class="chart-grid-item">
                        <span class="chart-grid-diff">↑ 25%</span>
                    </div>
                    <div class="chart-grid-item">
                        <span class="chart-grid-diff">↑ 33%</span>
                    </div>
                </div>
                
                <!-- Tooltips container -->
                <div id="chartTooltip" class="tooltip">
                    <div class="tooltip-label" id="tooltipLabel"></div>
                    <div class="tooltip-value" id="tooltipValue"></div>
                    <div class="tooltip-diff" id="tooltipDiff"></div>
                </div>
            </div>
            
            <!-- Legend -->
            <div class="mt-6 flex flex-wrap gap-4">
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-primary-500 rounded-sm"></div>
                    <span class="text-sm text-gray-600">Quarterly Revenue</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-green-500 rounded-sm"></div>
                    <span class="text-sm text-gray-600">Growth Rate</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-purple-500 rounded-sm"></div>
                    <span class="text-sm text-gray-600">Target</span>
                </div>
            </div>
        </div>
        
        <!-- Data Table -->
        <div class="p-6 border-t border-gray-200">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">Detailed Performance Data</h2>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr class="text-left text-sm text-gray-500 border-b">
                            <th class="pb-3">Quarter</th>
                            <th class="pb-3">Revenue</th>
                            <th class="pb-3">Growth Rate</th>
                            <th class="pb-3">Target</th>
                            <th class="pb-3">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3">Q1 2023</td>
                            <td class="py-3 font-medium">$120,000</td>
                            <td class="py-3 text-green-600">+25%</td>
                            <td class="py-3">$100,000</td>
                            <td class="py-3">
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Exceeded</span>
                            </td>
                        </tr>
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3">Q2 2023</td>
                            <td class="py-3 font-medium">$180,000</td>
                            <td class="py-3 text-green-600">+33%</td>
                            <td class="py-3">$160,000</td>
                            <td class="py-3">
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Exceeded</span>
                            </td>
                        </tr>
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3">Q3 2023</td>
                            <td class="py-3 font-medium">$240,000</td>
                            <td class="py-3 text-green-600">+25%</td>
                            <td class="py-3">$200,000</td>
                            <td class="py-3">
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Exceeded</span>
                            </td>
                        </tr>
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3">Q4 2023</td>
                            <td class="py-3 font-medium">$320,000</td>
                            <td class="py-3 text-green-600">+33%</td>
                            <td class="py-3">$300,000</td>
                            <td class="py-3">
                                <span class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs">Exceeded</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="p-6 bg-gray-50 border-t">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center gap-3">
                    <div class="bg-primary-100 p-2 rounded-lg">
                        <i class="fas fa-sync-alt text-primary-600"></i>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-800">Data refreshed</p>
                        <p class="text-xs text-gray-500">Last update: Jun 15, 2023</p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50">
                        <i class="fas fa-download mr-2"></i> Export
                    </button>
                    <button class="px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700">
                        <i class="fas fa-chart-line mr-2"></i> View Report
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Chart.js
            const ctx = document.getElementById('barChart').getContext('2d');
            
            // Sample data
            const data = {
                labels: ['Q1 2023', 'Q2 2023', 'Q3 2023', 'Q4 2023'],
                datasets: [
                    {
                        label: 'Revenue',
                        data: [120, 180, 240, 320],
                        backgroundColor: 'rgba(14, 165, 233, 0.7)',
                        borderColor: 'rgba(14, 165, 233, 1)',
                        borderWidth: 2,
                        borderRadius: 6,
                        borderSkipped: false,
                        tension: 0.3,
                        pointRadius: 0
                    },
                    {
                        label: 'Target',
                        data: [100, 160, 200, 300],
                        backgroundColor: 'rgba(139, 92, 246, 0.2)',
                        borderColor: 'rgba(139, 92, 246, 1)',
                        borderWidth: 2,
                        borderSkipped: false,
                        tension: 0.3,
                        pointRadius: 0
                    }
                ]
            };
            
            const options = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 20,
                            font: {
                                size: 14
                            }
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(255, 255, 255, 0.9)',
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        padding: 12,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                const value = context.parsed.y;
                                const label = context.parsed.x;
                                const dataset = context.datasetIndex;
                                
                                // Get the growth rate for this quarter
                                const growthRate = getGrowthRateForQuarter(label);
                                
                                return [
                                    `${label}: $${value.toLocaleString()}`,
                                    `Growth: ${growthRate}%`
                                ];
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            };
            
            const barChart = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: options
            });
            
            // Tooltip functionality
            const tooltip = document.getElementById('chartTooltip');
            const tooltipLabel = document.getElementById('tooltipLabel');
            const tooltipValue = document.getElementById('tooltipValue');
            const tooltipDiff = document.getElementById('tooltipDiff');
            
            // Add hover effect to grid items
            const gridItems = document.querySelectorAll('.chart-grid-item');
            gridItems.forEach(item => {
                item.addEventListener('mouseenter', function() {
                    tooltip.classList.add('visible');
                });
                
                item.addEventListener('mouseleave', function() {
                    tooltip.classList.remove('visible');
                });
            });
            
            // Function to get growth rate for a quarter
            function getGrowthRateForQuarter(quarter) {
                const quarters = ['Q1 2023', 'Q2 2023', 'Q3 2023', 'Q4 2023'];
                const currentIndex = quarters.indexOf(quarter);
                
                if (currentIndex === 0) return 0;
                
                const previousQuarter = quarters[currentIndex - 1];
                const currentRevenue = data.datasets[0].data[currentIndex];
                const previousRevenue = data.datasets[0].data[currentIndex - 1];
                
                const diff = (currentRevenue - previousRevenue) / previousRevenue * 100;
                return Math.round(diff);
            }
            
            // Update tooltip when chart tooltip is shown
            barChart.options.plugins.tooltip.events.forEach(event => {
                if (event.type === 'show') {
                    const { elements } = event;
                    if (elements.length > 0) {
                        const firstElement = elements[0];
                        const label = firstElement.label;
                        const value = firstElement.parsed.y;
                        const dataset = firstElement.datasetIndex;
                        
                        // Get the growth rate for this quarter
                        const growthRate = getGrowthRateForQuarter(label);
                        
                        tooltipLabel.textContent = label;
                        tooltipValue.textContent = `$${value.toLocaleString()}`;
                        tooltipDiff.textContent = `${growthRate}%`;
                        
                        // Position the tooltip
                        const chart = barChart;
                        const chartRect = chart.getChartRect();
                        const tooltipRect = tooltip.getBoundingClientRect();
                        
                        const isLast = elements.length === 1 && 
                                        elements[0].index === data.labels.length - 1;
                                        
                        if (isLast) {
                            tooltip.style.left = `${chartRect.right - tooltipRect.width - 12}px`;
                            tooltip.style.top = `${chartRect.top + chartRect.height / 2 - tooltipRect.height / 2}px`;
                        } else {
                            tooltip.style.left = `${chartRect.left + 12}px`;
                            tooltip.style.top = `${chartRect.top + chartRect.height / 2 - tooltipRect.height / 2}px`;
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>