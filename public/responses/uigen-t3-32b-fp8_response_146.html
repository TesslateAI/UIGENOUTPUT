<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jira-like Project Management Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Icon Library -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --color-bg-dark: rgb(10, 10, 10);
            --color-bg-dark-secondary: rgb(13, 13, 13);
            --color-bg-dark-tertiary: rgb(17, 17, 17);
            --color-bg-medium-dark: rgb(25, 25, 25);
            --color-bg-light: rgb(240, 245, 255);
            --color-bg-accent-light: rgb(238, 245, 255);

            --color-text-light: rgb(255, 255, 255);
            --color-text-light-secondary: rgba(255, 255, 255, 0.65);
            --color-text-light-tertiary: rgb(213, 213, 213);
            --color-text-dark: rgb(17, 17, 17);
            --color-text-dark-secondary: rgba(17,17,17,0.7);

            --color-accent-blue: rgb(0, 153, 255);
            --color-accent-blue-light: rgb(172, 227, 255);
            --color-accent-blue-lighter: rgb(204, 242, 255);
            --color-accent-blue-lightest: rgb(229, 249, 255);
            
            --color-border-dark: rgb(34, 34, 34);
            --color-border-light: rgb(230, 230, 230);
            --color-border-medium: rgb(200, 200, 200);

            --font-primary: 'Inter', sans-serif;
        }

        body {
            background-color: var(--color-bg-dark);
            color: var(--color-text-light-secondary);
            font-family: var(--font-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--color-bg-dark-secondary);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--color-border-dark);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-accent-blue);
        }

        /* Drag and Drop styles */
        .dragging {
            opacity: 0.5;
            transform: scale(1.02);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .drop-target {
            background-color: rgba(0, 153, 255, 0.2);
            border: 2px dashed var(--color-accent-blue);
        }
        .column-header {
            background-color: var(--color-bg-dark-secondary);
            border-bottom: 1px solid var(--color-border-dark);
        }
        .task-card {
            background-color: var(--color-bg-dark-tertiary);
            border: 1px solid var(--color-border-dark);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        /* Custom status colors */
        .status-to-do { background-color: rgba(255, 99, 132, 0.2); border-color: #FF6384; }
        .status-in-progress { background-color: rgba(54, 162, 235, 0.2); border-color: #36A2EB; }
        .status-done { background-color: rgba(75, 192, 192, 0.2); border-color: #4BC0C0; }
        .status-blocked { background-color: rgba(255, 205, 86, 0.2); border-color: #FFCE56; }

        /* Chart container to prevent infinite scroll */
        .chart-container {
            max-height: 400px; /* Limit height to prevent infinite scroll */
            overflow-y: auto; /* Enable scrolling within the chart container */
            padding-right: 15px; /* Space for scrollbar */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header / Top Navigation -->
    <header class="bg-[var(--color-bg-dark-secondary)] border-b border-[var(--color-border-dark)] py-4 px-6 flex items-center justify-between z-10">
        <h1 class="text-2xl font-bold text-[var(--color-text-light)]">ProjectFlow</h1>
        <div class="flex items-center space-x-4">
            <button class="bg-[var(--color-accent-blue)] hover:opacity-90 text-white font-semibold py-2 px-4 rounded-lg text-sm transition-opacity flex items-center">
                <i class="fas fa-plus mr-2"></i> New Task
            </button>
            <button class="text-[var(--color-text-light-secondary)] hover:text-[var(--color-text-light)] transition-colors">
                <i class="fas fa-bell"></i>
            </button>
            <div class="relative">
                <img src="https://placehold.co/40x40/FF6384/FFFFFF/png?text=JD" alt="User Avatar" class="w-10 h-10 rounded-full cursor-pointer border border-[var(--color-border-dark)]">
                <div class="absolute right-0 mt-2 w-48 bg-[var(--color-bg-dark-secondary)] border border-[var(--color-border-dark)] rounded-lg shadow-lg hidden group-hover:block">
                    <a href="#" class="block px-4 py-2 text-sm text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)]">Profile</a>
                    <a href="#" class="block px-4 py-2 text-sm text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)]">Settings</a>
                    <a href="#" class="block px-4 py-2 text-sm text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)]">Logout</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-[var(--color-bg-dark-secondary)] border-r border-[var(--color-border-dark)] p-6 flex flex-col hidden md:flex">
            <nav class="space-y-2">
                <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light)] bg-[var(--color-bg-dark-tertiary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                    <i class="fas fa-tachometer-alt text-lg"></i>
                    <span class="font-medium">Dashboard</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                    <i class="fas fa-tasks text-lg"></i>
                    <span class="font-medium">Backlog</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                    <i class="fas fa-play-circle text-lg"></i>
                    <span class="font-medium">Sprints</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                    <i class="fas fa-folder-open text-lg"></i>
                    <span class="font-medium">Epics</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                    <i class="fas fa-users text-lg"></i>
                    <span class="font-medium">Teams</span>
                </a>
                <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                    <i class="fas fa-chart-line text-lg"></i>
                    <span class="font-medium">Reports</span>
                </a>
            </nav>
            <div class="mt-auto pt-6 border-t border-[var(--color-border-dark)]">
                <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                    <i class="fas fa-cog text-lg"></i>
                    <span class="font-medium">Settings</span>
                </a>
            </div>
        </aside>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-button" class="md:hidden p-4 text-[var(--color-text-light)] focus:outline-none">
            <i class="fas fa-bars text-xl"></i>
        </button>

        <!-- Mobile Sidebar Overlay -->
        <div id="mobile-sidebar" class="fixed inset-0 bg-[var(--color-bg-dark-secondary)] z-20 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden">
            <div class="flex flex-col h-full">
                <div class="p-6 flex items-center justify-between border-b border-[var(--color-border-dark)]">
                    <h2 class="text-2xl font-bold text-[var(--color-text-light)]">ProjectFlow</h2>
                    <button id="close-mobile-sidebar" class="text-[var(--color-text-light)] focus:outline-none">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <nav class="flex-1 p-6 space-y-2">
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light)] bg-[var(--color-bg-dark-tertiary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                        <i class="fas fa-tachometer-alt text-lg"></i>
                        <span class="font-medium">Dashboard</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                        <i class="fas fa-tasks text-lg"></i>
                        <span class="font-medium">Backlog</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                        <i class="fas fa-play-circle text-lg"></i>
                        <span class="font-medium">Sprints</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                        <i class="fas fa-folder-open text-lg"></i>
                        <span class="font-medium">Epics</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                        <i class="fas fa-users text-lg"></i>
                        <span class="font-medium">Teams</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                        <i class="fas fa-chart-line text-lg"></i>
                        <span class="font-medium">Reports</span>
                    </a>
                </nav>
                <div class="p-6 border-t border-[var(--color-border-dark)]">
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-[var(--color-text-light-secondary)] hover:bg-[var(--color-bg-dark-tertiary)] transition-colors">
                        <i class="fas fa-cog text-lg"></i>
                        <span class="font-medium">Settings</span>
                    </a>
                </div>
            </div>
        </div>


        <!-- Main Workspace -->
        <main class="flex-1 p-6 overflow-y-auto bg-[var(--color-bg-dark)]">
            <h2 class="text-3xl font-bold text-[var(--color-text-light)] mb-6">Sprint 1: Feature Development</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Backlog Column -->
                <div class="bg-[var(--color-bg-dark-tertiary)] border border-[var(--color-border-dark)] rounded-lg p-4 flex flex-col">
                    <h3 class="text-xl font-semibold text-[var(--color-text-light)] mb-4 flex items-center justify-between">
                        Backlog
                        <button class="text-[var(--color-accent-blue)] hover:text-[var(--color-accent-blue-light)] transition-colors text-sm"><i class="fas fa-plus"></i></button>
                    </h3>
                    <div id="backlog-column" class="flex-1 space-y-3 overflow-y-auto custom-scrollbar pr-2">
                        <!-- Task Card 1 -->
                        <div class="task-card p-4 rounded-lg cursor-grab active:cursor-grabbing" draggable="true" data-task-id="1" data-status="backlog">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-medium text-[var(--color-text-light)]">Implement User Authentication</h4>
                                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-accent-blue-lightest)] text-[var(--color-accent-blue)] font-semibold">High</span>
                            </div>
                            <p class="text-sm text-[var(--color-text-light-secondary)] mb-3">Develop login, registration, and password reset functionalities using OAuth.</p>
                            <div class="flex items-center justify-between text-xs text-[var(--color-text-light-secondary)]">
                                <span><i class="fas fa-user-circle mr-1"></i> John Doe</span>
                                <span><i class="fas fa-calendar-alt mr-1"></i> Due: 2024-07-20</span>
                            </div>
                            <div class="mt-3 flex justify-end space-x-2">
                                <button class="text-[var(--color-text-light-secondary)] hover:text-[var(--color-text-light)] text-sm"><i class="fas fa-edit"></i></button>
                                <button class="text-[var(--color-text-light-secondary)] hover:text-red-500 text-sm"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        </div>
                        <!-- Task Card 2 -->
                        <div class="task-card p-4 rounded-lg cursor-grab active:cursor-grabbing" draggable="true" data-task-id="2" data-status="backlog">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-medium text-[var(--color-text-light)]">Design Database Schema</h4>
                                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-accent-blue-lightest)] text-[var(--color-accent-blue)] font-semibold">Medium</span>
                            </div>
                            <p class="text-sm text-[var(--color-text-light-secondary)] mb-3">Define tables, relationships, and indexes for the new application.</p>
                            <div class="flex items-center justify-between text-xs text-[var(--color-text-light-secondary)]">
                                <span><i class="fas fa-user-circle mr-1"></i> Jane Smith</span>
                                <span><i class="fas fa-calendar-alt mr-1"></i> Due: 2024-07-25</span>
                            </div>
                            <div class="mt-3 flex justify-end space-x-2">
                                <button class="text-[var(--color-text-light-secondary)] hover:text-[var(--color-text-light)] text-sm"><i class="fas fa-edit"></i></button>
                                <button class="text-[var(--color-text-light-secondary)] hover:text-red-500 text-sm"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- To Do Column -->
                <div class="bg-[var(--color-bg-dark-tertiary)] border border-[var(--color-border-dark)] rounded-lg p-4 flex flex-col">
                    <h3 class="text-xl font-semibold text-[var(--color-text-light)] mb-4 flex items-center justify-between">
                        To Do
                        <button class="text-[var(--color-accent-blue)] hover:text-[var(--color-accent-blue-light)] transition-colors text-sm"><i class="fas fa-plus"></i></button>
                    </h3>
                    <div id="todo-column" class="flex-1 space-y-3 overflow-y-auto custom-scrollbar pr-2">
                        <!-- Task Card 3 -->
                        <div class="task-card p-4 rounded-lg cursor-grab active:cursor-grabbing" draggable="true" data-task-id="3" data-status="todo">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-medium text-[var(--color-text-light)]">Set up CI/CD Pipeline</h4>
                                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-accent-blue-lightest)] text-[var(--color-accent-blue)] font-semibold">High</span>
                            </div>
                            <p class="text-sm text-[var(--color-text-light-secondary)] mb-3">Configure GitHub Actions for automated testing and deployment.</p>
                            <div class="flex items-center justify-between text-xs text-[var(--color-text-light-secondary)]">
                                <span><i class="fas fa-user-circle mr-1"></i> John Doe</span>
                                <span><i class="fas fa-calendar-alt mr-1"></i> Due: 2024-07-18</span>
                            </div>
                            <div class="mt-3 flex justify-end space-x-2">
                                <button class="text-[var(--color-text-light-secondary)] hover:text-[var(--color-text-light)] text-sm"><i class="fas fa-edit"></i></button>
                                <button class="text-[var(--color-text-light-secondary)] hover:text-red-500 text-sm"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- In Progress Column -->
                <div class="bg-[var(--color-bg-dark-tertiary)] border border-[var(--color-border-dark)] rounded-lg p-4 flex flex-col">
                    <h3 class="text-xl font-semibold text-[var(--color-text-light)] mb-4 flex items-center justify-between">
                        In Progress
                        <button class="text-[var(--color-accent-blue)] hover:text-[var(--color-accent-blue-light)] transition-colors text-sm"><i class="fas fa-plus"></i></button>
                    </h3>
                    <div id="in-progress-column" class="flex-1 space-y-3 overflow-y-auto custom-scrollbar pr-2">
                        <!-- Task Card 4 -->
                        <div class="task-card p-4 rounded-lg cursor-grab active:cursor-grabbing" draggable="true" data-task-id="4" data-status="in-progress">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-medium text-[var(--color-text-light)]">Develop API Endpoints</h4>
                                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-accent-blue-lightest)] text-[var(--color-accent-blue)] font-semibold">High</span>
                            </div>
                            <p class="text-sm text-[var(--color-text-light-secondary)] mb-3">Create RESTful APIs for user data and project management.</p>
                            <div class="flex items-center justify-between text-xs text-[var(--color-text-light-secondary)]">
                                <span><i class="fas fa-user-circle mr-1"></i> Jane Smith</span>
                                <span><i class="fas fa-calendar-alt mr-1"></i> Due: 2024-07-22</span>
                            </div>
                            <div class="mt-3 flex justify-end space-x-2">
                                <button class="text-[var(--color-text-light-secondary)] hover:text-[var(--color-text-light)] text-sm"><i class="fas fa-edit"></i></button>
                                <button class="text-[var(--color-text-light-secondary)] hover:text-red-500 text-sm"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Done Column -->
                <div class="bg-[var(--color-bg-dark-tertiary)] border border-[var(--color-border-dark)] rounded-lg p-4 flex flex-col">
                    <h3 class="text-xl font-semibold text-[var(--color-text-light)] mb-4 flex items-center justify-between">
                        Done
                        <button class="text-[var(--color-accent-blue)] hover:text-[var(--color-accent-blue-light)] transition-colors text-sm"><i class="fas fa-plus"></i></button>
                    </h3>
                    <div id="done-column" class="flex-1 space-y-3 overflow-y-auto custom-scrollbar pr-2">
                        <!-- Task Card 5 -->
                        <div class="task-card p-4 rounded-lg cursor-grab active:cursor-grabbing" draggable="true" data-task-id="5" data-status="done">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-medium text-[var(--color-text-light)]">Set up Project Repository</h4>
                                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-accent-blue-lightest)] text-[var(--color-accent-blue)] font-semibold">Low</span>
                            </div>
                            <p class="text-sm text-[var(--color-text-light-secondary)] mb-3">Initialize Git repository and commit initial project structure.</p>
                            <div class="flex items-center justify-between text-xs text-[var(--color-text-light-secondary)]">
                                <span><i class="fas fa-user-circle mr-1"></i> John Doe</span>
                                <span><i class="fas fa-calendar-alt mr-1"></i> Completed: 2024-07-15</span>
                            </div>
                            <div class="mt-3 flex justify-end space-x-2">
                                <button class="text-[var(--color-text-light-secondary)] hover:text-[var(--color-text-light)] text-sm"><i class="fas fa-edit"></i></button>
                                <button class="text-[var(--color-text-light-secondary)] hover:text-red-500 text-sm"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 p-6 bg-[var(--color-bg-dark-tertiary)] border border-[var(--color-border-dark)] rounded-lg">
                <h3 class="text-xl font-semibold text-[var(--color-text-light)] mb-4">Sprint Progress</h3>
                <div class="chart-container">
                    <canvas id="sprintProgressChart"></canvas>
                </div>
            </div>

            <!-- Modals for Task Details/Creation -->
            <div id="task-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
                <div class="bg-[var(--color-bg-dark-secondary)] p-8 rounded-lg shadow-xl w-full max-w-lg relative">
                    <button id="close-modal" class="absolute top-4 right-4 text-[var(--color-text-light-secondary)] hover:text-[var(--color-text-light)] text-2xl">&times;</button>
                    <h3 class="text-2xl font-bold text-[var(--color-text-light)] mb-6" id="modal-task-title"></h3>
                    <p class="text-sm text-[var(--color-text-light-secondary)] mb-4" id="modal-task-description"></p>
                    <div class="flex items-center space-x-2 mb-4">
                        <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-accent-blue-lightest)] text-[var(--color-accent-blue)] font-semibold" id="modal-task-priority"></span>
                        <span class="text-xs px-2 py-1 rounded-full" id="modal-task-status"></span>
                    </div>
                    <div class="flex items-center justify-between text-sm text-[var(--color-text-light-secondary)] mb-4">
                        <span><i class="fas fa-user-circle mr-1"></i> Assignee: <span id="modal-task-assignee"></span></span>
                        <span><i class="fas fa-calendar-alt mr-1"></i> Due Date: <span id="modal-task-due-date"></span></span>
                    </div>

                    <!-- Status Workflow Buttons -->
                    <div class="flex flex-wrap gap-2 mb-6">
                        <button class="status-button px-4 py-2 rounded-full text-sm font-semibold text-[var(--color-text-light)] bg-[var(--color-accent-blue)] hover:bg-[var(--color-accent-blue-light)] transition-colors" data-status="backlog">Backlog</button>
                        <button class="status-button px-4 py-2 rounded-full text-sm font-semibold text-[var(--color-text-light)] bg-gray-600 hover:bg-gray-700 transition-colors" data-status="todo">To Do</button>
                        <button class="status-button px-4 py-2 rounded-full text-sm font-semibold text-[var(--color-text-light)] bg-yellow-600 hover:bg-yellow-700 transition-colors" data-status="in-progress">In Progress</button>
                        <button class="status-button px-4 py-2 rounded-full text-sm font-semibold text-[var(--color-text-light)] bg-green-600 hover:bg-green-700 transition-colors" data-status="done">Done</button>
                        <button class="status-button px-4 py-2 rounded-full text-sm font-semibold text-[var(--color-text-light)] bg-red-600 hover:bg-red-700 transition-colors" data-status="blocked">Blocked</button>
                    </div>

                    <div class="flex justify-end space-x-3">
                        <button class="bg-[var(--color-bg-dark-tertiary)] text-[var(--color-text-light-secondary)] hover:bg-[var(--color-border-dark)] px-5 py-2 rounded-lg text-sm transition-colors">Cancel</button>
                        <button class="bg-[var(--color-accent-blue)] hover:opacity-90 text-white px-5 py-2 rounded-lg text-sm transition-opacity">Save Changes</button>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Mobile Menu Toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileSidebar = document.getElementById('mobile-sidebar');
            const closeMobileSidebarButton = document.getElementById('close-mobile-sidebar');

            mobileMenuButton.addEventListener('click', () => {
                mobileSidebar.classList.remove('-translate-x-full');
                mobileSidebar.classList.add('translate-x-0');
            });

            closeMobileSidebarButton.addEventListener('click', () => {
                mobileSidebar.classList.remove('translate-x-0');
                mobileSidebar.classList.add('-translate-x-full');
            });

            // Task Modal Logic
            const taskModal = document.getElementById('task-modal');
            const closeModalButton = document.getElementById('close-modal');
            const modalTaskTitle = document.getElementById('modal-task-title');
            const modalTaskDescription = document.getElementById('modal-task-description');
            const modalTaskPriority = document.getElementById('modal-task-priority');
            const modalTaskStatus = document.getElementById('modal-task-status');
            const modalTaskAssignee = document.getElementById('modal-task-assignee');
            const modalTaskDueDate = document.getElementById('modal-task-due-date');
            const statusButtons = document.querySelectorAll('.status-button');

            let currentEditingTaskId = null;

            closeModalButton.addEventListener('click', () => {
                taskModal.classList.add('hidden');
            });

            // Function to open modal with task data
            window.openTaskModal = function(taskElement) {
                currentEditingTaskId = taskElement.dataset.taskId;
                modalTaskTitle.textContent = taskElement.querySelector('h4').textContent;
                modalTaskDescription.textContent = taskElement.querySelector('p').textContent;
                modalTaskPriority.textContent = taskElement.querySelector('.text-xs.rounded-full.bg-accent-blue-lightest').textContent;
                modalTaskAssignee.textContent = taskElement.querySelector('.fa-user-circle').nextSibling.textContent.trim();
                modalTaskDueDate.textContent = taskElement.querySelector('.fa-calendar-alt').nextSibling.textContent.trim();
                
                const statusSpan = taskElement.querySelector('.text-xs.rounded-full'); // Get the current status span
                modalTaskStatus.className = 'text-xs px-2 py-1 rounded-full'; // Reset classes
                if (statusSpan) {
                    modalTaskStatus.classList.add(statusSpan.classList[0]); // Copy status class
                    modalTaskStatus.textContent = statusSpan.textContent;
                } else {
                    modalTaskStatus.textContent = 'N/A';
                }

                // Set initial active status button
                statusButtons.forEach(btn => {
                    btn.classList.remove('bg-green-600', 'bg-yellow-600', 'bg-gray-600', 'bg-red-600', 'bg-[var(--color-accent-blue)]'); // Remove all status colors
                    btn.classList.add('bg-gray-600'); // Default to gray for inactive
                    if (btn.dataset.status === taskElement.dataset.status) {
                        btn.classList.remove('bg-gray-600');
                        btn.classList.add(statusSpan.classList[0]); // Apply current status color
                    }
                });

                taskModal.classList.remove('hidden');
            };

            // Status button click handler
            statusButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault(); // Prevent default link behavior if button is in a link
                    const newStatus = button.dataset.status;
                    // Here you would typically update the task's status in your backend
                    console.log(`Updating task ${currentEditingTaskId} to status: ${newStatus}`);
                    
                    // Update modal display
                    modalTaskStatus.className = 'text-xs px-2 py-1 rounded-full';
                    modalTaskStatus.classList.add(button.classList[0].replace('hover:bg-', 'bg-')); // Apply new status color
                    modalTaskStatus.textContent = button.textContent;

                    // Update the task card's status in the DOM (for visual feedback)
                    const taskCard = document.querySelector(`[data-task-id="${currentEditingTaskId}"]`);
                    if (taskCard) {
                        taskCard.dataset.status = newStatus;
                        const statusSpan = taskCard.querySelector('.text-xs.rounded-full');
                        if (statusSpan) {
                            statusSpan.className = 'text-xs px-2 py-1 rounded-full';
                            statusSpan.classList.add(button.classList[0].replace('hover:bg-', 'bg-'));
                            statusSpan.textContent = button.textContent;
                        }
                    }
                });
            });

            // Drag and Drop Logic
            const columns = {
                'backlog': document.getElementById('backlog-column'),
                'todo': document.getElementById('todo-column'),
                'in-progress': document.getElementById('in-progress-column'),
                'done': document.getElementById('done-column'),
                'blocked': document.getElementById('blocked-column') // Assuming a blocked column exists or is part of done
            };

            let draggedItem = null;

            document.querySelectorAll('.task-card').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    draggedItem = e.target;
                    e.target.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                    e.dataTransfer.setData('text/plain', e.target.dataset.taskId); // Set data for drop
                });

                item.addEventListener('dragend', (e) => {
                    e.target.classList.remove('dragging');
                    draggedItem = null;
                });
            });

            for (const status in columns) {
                if (columns[status]) {
                    columns[status].addEventListener('dragover', (e) => {
                        e.preventDefault(); // Allow drop
                        const target = e.target.closest('.task-card');
                        if (target && target !== draggedItem) {
                            const bounding = target.getBoundingClientRect();
                            const offset = bounding.y + (bounding.height / 2);
                            if (e.clientY < offset) {
                                // Insert before target
                                target.parentNode.insertBefore(draggedItem, target);
                            } else {
                                // Insert after target
                                target.parentNode.insertBefore(draggedItem, target.nextSibling);
                            }
                        } else if (!target && draggedItem) {
                            // If dragging over an empty column or empty space in a column
                            columns[status].appendChild(draggedItem);
                        }
                    });

                    columns[status].addEventListener('drop', (e) => {
                        e.preventDefault();
                        if (draggedItem) {
                            // Update task status in data attribute
                            draggedItem.dataset.status = status;
                            // Here, you would send an update to your backend to persist the new status
                            console.log(`Task ${draggedItem.dataset.taskId} moved to ${status}`);
                            // You might want to re-render or update the chart here
                            updateSprintProgressChart();
                        }
                    });
                }
            }

            // Sprint Progress Chart
            const ctx = document.getElementById('sprintProgressChart').getContext('2d');
            const sprintProgressChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['To Do', 'In Progress', 'Done', 'Blocked'],
                    datasets: [{
                        data: [1, 1, 1, 0], // Initial counts: 1 To Do, 1 In Progress, 1 Done, 0 Blocked
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.7)', // To Do
                            'rgba(255, 205, 86, 0.7)', // In Progress
                            'rgba(75, 192, 192, 0.7)', // Done
                            'rgba(255, 99, 132, 0.7)'  // Blocked
                        ],
                        borderColor: [
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 205, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(255, 99, 132, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false, // Allows chart to respect parent height
                    cutout: '70%', // Makes it a doughnut chart
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: 'var(--color-text-light-secondary)',
                                font: {
                                    family: 'Inter'
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + ' tasks';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            // Function to update chart data
            function updateSprintProgressChart() {
                const counts = {
                    backlog: 0,
                    todo: 0,
                    'in-progress': 0,
                    done: 0,
                    blocked: 0
                };

                document.querySelectorAll('.task-card').forEach(task => {
                    const status = task.dataset.status;
                    if (counts[status] !== undefined) {
                        counts[status]++;
                    }
                });

                // Update chart data
                sprintProgressChart.data.datasets[0].data = [
                    counts.todo,
                    counts['in-progress'],
                    counts.done,
                    counts.blocked
                ];
                sprintProgressChart.update();
            }

            // Initial chart update
            updateSprintProgressChart();

            // Simulate new task addition (for demo purposes)
            const addTaskButtons = document.querySelectorAll('button[data-status="backlog"], button[data-status="todo"], button[data-status="in-progress"], button[data-status="done"]');
            addTaskButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const newTaskId = Date.now(); // Simple unique ID
                    const newStatus = button.dataset.status;
                    const newTaskCard = `
                        <div class="task-card p-4 rounded-lg cursor-grab active:cursor-grabbing" draggable="true" data-task-id="${newTaskId}" data-status="${newStatus}">
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="text-lg font-medium text-[var(--color-text-light)]">New Task ${newTaskId}</h4>
                                <span class="text-xs px-2 py-1 rounded-full bg-[var(--color-accent-blue-lightest)] text-[var(--color-accent-blue)] font-semibold">Low</span>
                            </div>
                            <p class="text-sm text-[var(--color-text-light-secondary)] mb-3">A new task added dynamically.</p>
                            <div class="flex items-center justify-between text-xs text-[var(--color-text-light-secondary)]">
                                <span><i class="fas fa-user-circle mr-1"></i> Unassigned</span>
                                <span><i class="fas fa-calendar-alt mr-1"></i> Due: Soon</span>
                            </div>
                            <div class="mt-3 flex justify-end space-x-2">
                                <button class="text-[var(--color-text-light-secondary)] hover:text-[var(--color-text-light)] text-sm"><i class="fas fa-edit"></i></button>
                                <button class="text-[var(--color-text-light-secondary)] hover:text-red-500 text-sm"><i class="fas fa-trash-alt"></i></button>
                            </div>
                        </div>
                    `;
                    const targetColumn = document.getElementById(`${newStatus}-column`);
                    targetColumn.innerHTML += newTaskCard;
                    updateSprintProgressChart(); // Update chart after adding new task
                });
            });
        });
    </script>
</body>
</html>