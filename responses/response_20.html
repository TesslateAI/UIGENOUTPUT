<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Lesson with Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --color-primary: #2563eb; /* Tailwind blue-600 */
            --color-secondary: #bfdbfe; /* Tailwind blue-200 */
            --color-text-dark: #1f2937; /* Tailwind gray-800 */
            --color-text-medium: #4b5563; /* Tailwind gray-600 */
            --color-bg-light: #f9fafb; /* Tailwind gray-50 */
            --color-border: #d1d5db; /* Tailwind gray-300 */
            --color-success: #22c55e; /* Tailwind green-500 */
            --color-error: #ef4444; /* Tailwind red-500 */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg-light);
            color: var(--color-text-dark);
        }

        .video-player-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            background-color: #000; /* Fallback for video */
        }
        .video-player-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .quiz-question {
            background-color: white;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
            padding: 1.5rem; /* p-6 */
        }
        .quiz-answer {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem; /* py-3 px-4 */
            border-radius: 0.5rem; /* rounded-lg */
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .quiz-answer:hover {
            background-color: var(--color-secondary);
        }
        .quiz-answer.selected {
            background-color: var(--color-primary);
            color: white;
        }
        .quiz-answer.correct {
            background-color: var(--color-success);
            color: white;
        }
        .quiz-answer.incorrect {
            background-color: var(--color-error);
            color: white;
        }
        .progress-bar {
            width: 0%;
            height: 0.5rem; /* h-1 */
            background-color: var(--color-primary);
            border-radius: 9999px; /* rounded-full */
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6 md:p-8">
        <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-6">
            Mastering JavaScript: Functions and Scope
        </h1>

        <!-- Video Lesson Section -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                Video Lesson: Understanding JavaScript Functions
            </h2>
            <div class="video-player-container mb-6">
                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <p class="text-gray-600 leading-relaxed">
                In this lesson, we delve into the core concepts of JavaScript functions, including declaration, execution, and the crucial topic of scope. You'll learn how functions encapsulate logic, promote reusability, and manage variable visibility within different parts of your code. We'll explore global vs. local scope, closures, and best practices for writing clean, maintainable functions.
            </p>
        </section>

        <!-- Interactive Quiz Section -->
        <section class="mb-10">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">
                Interactive Quiz: JavaScript Functions
            </h2>
            <div id="quiz-container" class="space-y-6">
                <!-- Quiz Question 1 -->
                <div class="quiz-question">
                    <h3 class="text-xl font-semibold mb-4">Q1: What is the primary purpose of a JavaScript function?</h3>
                    <div class="space-y-3">
                        <div class="quiz-answer" data-correct="true">
                            <input type="radio" name="q1" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>To encapsulate a block of code for reusability and organization.</span>
                        </div>
                        <div class="quiz-answer">
                            <input type="radio" name="q1" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>To declare global variables.</span>
                        </div>
                        <div class="quiz-answer">
                            <input type="radio" name="q1" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>To define CSS styles.</span>
                        </div>
                    </div>
                </div>

                <!-- Quiz Question 2 -->
                <div class="quiz-question">
                    <h3 class="text-xl font-semibold mb-4">Q2: Which keyword is used to declare a function in JavaScript?</h3>
                    <div class="space-y-3">
                        <div class="quiz-answer">
                            <input type="radio" name="q2" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>const</span>
                        </div>
                        <div class="quiz-answer" data-correct="true">
                            <input type="radio" name="q2" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>function</span>
                        </div>
                        <div class="quiz-answer">
                            <input type="radio" name="q2" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>var</span>
                        </div>
                    </div>
                </div>

                <!-- Quiz Question 3 -->
                <div class="quiz-question">
                    <h3 class="text-xl font-semibold mb-4">Q3: What is a closure in JavaScript?</h3>
                    <div class="space-y-3">
                        <div class="quiz-answer">
                            <input type="radio" name="q3" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>A function that is immediately invoked.</span>
                        </div>
                        <div class="quiz-answer">
                            <input type="radio" name="q3" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>A function that is declared inside another function and has access to the outer function's variables.</span>
                        </div>
                        <div class="quiz-answer" data-correct="true">
                            <input type="radio" name="q3" class="mr-3 text-blue-600 focus:ring-blue-500" disabled>
                            <span>A function that returns another function.</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 flex justify-between items-center">
                <div class="w-1/2">
                    <div class="flex items-center text-sm text-gray-600 mb-2">
                        <i class="fas fa-tasks mr-2"></i> Quiz Progress:
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-1">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
                <button id="submit-quiz-btn" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-200">
                    Submit Quiz <i class="fas fa-check-circle ml-2"></i>
                </button>
            </div>

            <div id="quiz-result" class="mt-8 p-4 rounded-lg hidden">
                <h3 class="text-xl font-bold mb-2" id="result-message"></h3>
                <p class="text-gray-600" id="result-details"></p>
            </div>
        </section>

        <!-- Call to Action for Next Lesson -->
        <section class="mt-10 pt-8 border-t border-gray-200 text-center">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Ready to Learn More?</h2>
            <p class="text-gray-600 mb-6">
                Continue your journey with the next lesson on JavaScript arrays and objects.
            </p>
            <a href="#" class="inline-flex items-center bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-md">
                Next Lesson: Arrays & Objects <i class="fas fa-arrow-right ml-3"></i>
            </a>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const quizContainer = document.getElementById('quiz-container');
            const submitQuizBtn = document.getElementById('submit-quiz-btn');
            const quizResult = document.getElementById('quiz-result');
            const resultMessage = document.getElementById('result-message');
            const resultDetails = document.getElementById('result-details');
            const progressBar = document.querySelector('.progress-bar');

            let currentQuestionIndex = 0;
            let selectedAnswers = {}; // To store user's selected answers
            let correctAnswers = 0;
            let totalQuestions = 0;

            // Initialize total questions
            totalQuestions = quizContainer.querySelectorAll('.quiz-question').length;
            updateProgressBar(0);

            // Function to handle answer selection
            const handleAnswerSelection = (event) => {
                const answerDiv = event.target.closest('.quiz-answer');
                const questionId = answerDiv.querySelector('input').name;

                // Deselect previously selected answer for the same question
                document.querySelectorAll(`.quiz-answer[data-correct="true"][name="${questionId}"]`).forEach(anc => {
                    anc.classList.remove('selected');
                });
                document.querySelectorAll(`.quiz-answer[name="${questionId}"]`).forEach(anc => {
                    anc.classList.remove('selected');
                });

                // Select the clicked answer
                answerDiv.classList.add('selected');
                selectedAnswers[questionId] = answerDiv.querySelector('input').value; // Store the value or just the fact it's selected
            };

            // Add event listeners to all quiz answers
            document.querySelectorAll('.quiz-answer').forEach(answerDiv => {
                answerDiv.addEventListener('click', handleAnswerSelection);
            });

            // Function to update the progress bar
            const updateProgressBar = (progress) => {
                progressBar.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', progress);
            };

            // Function to check answers and display results
            const checkAnswers = () => {
                correctAnswers = 0;
                quizContainer.querySelectorAll('.quiz-question').forEach((questionDiv, index) => {
                    const questionId = questionDiv.querySelector('input').name;
                    const correctAnswerDiv = questionDiv.querySelector('.quiz-answer[data-correct="true"]');
                    const userAnswerDiv = questionDiv.querySelector('.quiz-answer.selected');

                    // Mark correct answer
                    if (correctAnswerDiv) {
                        correctAnswerDiv.classList.add('correct');
                        correctAnswerDiv.querySelector('input').checked = true; // Check the correct radio button
                    }

                    // Mark user's answer
                    if (userAnswerDiv) {
                        userAnswerDiv.classList.add('incorrect');
                        userAnswerDiv.querySelector('input').checked = true; // Check the user's radio button
                    }

                    // Determine if user's answer is correct
                    if (userAnswerDiv && correctAnswerDiv && userAnswerDiv === correctAnswerDiv) {
                        correctAnswers++;
                    }
                });

                const score = (correctAnswers / totalQuestions) * 100;
                updateProgressBar(score);

                // Display results
                if (score === 100) {
                    resultMessage.textContent = 'Congratulations! You got all answers correct!';
                    resultMessage.classList.add('text-green-600');
                } else if (score >= 70) {
                    resultMessage.textContent = 'Good job! You did well.';
                    resultMessage.classList.add('text-blue-600');
                } else {
                    resultMessage.textContent = 'Keep practicing! You can do better.';
                    resultMessage.classList.add('text-red-600');
                }
                resultDetails.textContent = `You scored ${correctAnswers} out of ${totalQuestions} questions correctly (${score.toFixed(0)}%).`;
                quizResult.classList.remove('hidden');
            };

            submitQuizBtn.addEventListener('click', checkAnswers);
        });
    </script>
</body>
</html>