<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root {
            --color-primary-green: rgb(11 71 39);
            --color-primary-green-darker: rgb(5 59 33);
            --color-bg-light: rgb(248 251 247);
            --color-text-dark: rgb(17 29 23);
            --color-text-medium: rgb(78 88 85);
            --color-border-light: rgb(229 234 230);
            --color-bg-very-light: rgb(255 255 255);
            --color-text-gray: rgb(140 147 143);
            --color-primary-green-light-bg: rgb(229 243 230);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg-very-light);
            color: var(--color-text-dark);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .btn-primary {
            background-color: var(--color-primary-green);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s ease-in-out;
        }
        .btn-primary:hover {
            background-color: var(--color-primary-green-darker);
        }

        .card {
            background-color: var(--color-bg-very-light);
            border: 1px solid var(--color-border-light);
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .star-rating .star {
            color: #ccc;
            cursor: pointer;
            transition: color 0.2s ease-in-out;
        }
        .star-rating .star.filled {
            color: #f39c12; /* Gold color */
        }
    </style>
</head>
<body class="bg-[var(--color-bg-light)]">

    <!-- Header / Navbar -->
    <header class="bg-[var(--color-bg-very-light)] shadow-sm py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-[var(--color-primary-green)]">RecipeFinder</h1>
            <div class="flex items-center space-x-4">
                <input type="text" id="search-recipe" placeholder="Search recipes..." class="px-4 py-2 border border-[var(--color-border-light)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-green)]">
                <button class="btn-primary flex items-center space-x-2">
                    <i class="fas fa-search"></i>
                    <span>Search</span>
                </button>
                <button class="text-[var(--color-text-medium)] hover:text-[var(--color-primary-green)]">
                    <i class="fas fa-heart text-xl"></i>
                </button>
                <button class="text-[var(--color-text-medium)] hover:text-[var(--color-primary-green)]">
                    <i class="fas fa-user-circle text-xl"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- Recipe List / Search Results -->
        <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Recipe Card 1 -->
            <div class="card p-6 flex flex-col">
                <img src="https://placehold.co/400x250/E0F2F7/0A5B27?text=Recipe+1" alt="Delicious Pasta" class="w-full h-40 object-cover rounded-md mb-4">
                <h2 class="text-xl font-semibold text-[var(--color-text-dark)] mb-2">Classic Spaghetti Carbonara</h2>
                <p class="text-[var(--color-text-medium)] text-sm mb-4">A creamy, egg-based pasta dish from Rome.</p>
                <div class="flex items-center text-sm text-[var(--color-text-gray)] mb-4">
                    <i class="fas fa-clock mr-2"></i> 30 min
                    <i class="fas fa-fire-alt mx-4"></i> 400 kcal
                </div>
                <div class="flex-grow"></div> <!-- Spacer to push button to bottom -->
                <div class="flex justify-between items-center mt-auto">
                    <button class="btn-primary !py-2 !px-4 !text-sm">View Recipe</button>
                    <button class="text-[var(--color-text-medium)] hover:text-[var(--color-primary-green)]" onclick="toggleSubstitution(this)">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                </div>
                <!-- Substitution Suggestions Dropdown -->
                <div id="substitution-1" class="mt-4 p-3 bg-[var(--color-primary-green-light-bg)] border border-[var(--color-border-light)] rounded-md text-sm text-[var(--color-text-medium)] hidden">
                    <p class="font-medium mb-2">Ingredient Substitutions:</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>Pancetta:</strong> Substitute with <em>bacon</em> or <em>guanciale</em>.</li>
                        <li><strong>Parmigiano-Reggiano:</strong> Use <em>Pecorino Romano</em> or <em>Grana Padano</em>.</li>
                        <li><strong>Eggs:</strong> For a vegan option, use <em>flax eggs</em> (1 tbsp ground flaxseed + 3 tbsp water = 1 egg).</li>
                    </ul>
                </div>
            </div>

            <!-- Recipe Card 2 -->
            <div class="card p-6 flex flex-col">
                <img src="https://placehold.co/400x250/F0F8E5/0A5B27?text=Recipe+2" alt="Fresh Salad" class="w-full h-40 object-cover rounded-md mb-4">
                <h2 class="text-xl font-semibold text-[var(--color-text-dark)] mb-2">Summer Fruit Salad</h2>
                <p class="text-[var(--color-text-medium)] text-sm mb-4">A refreshing mix of seasonal fruits.</p>
                <div class="flex items-center text-sm text-[var(--color-text-gray)] mb-4">
                    <i class="fas fa-clock mr-2"></i> 15 min
                    <i class="fas fa-fire-alt mx-4"></i> 150 kcal
                </div>
                 <div class="flex-grow"></div>
                <div class="flex justify-between items-center mt-auto">
                    <button class="btn-primary !py-2 !px-4 !text-sm">View Recipe</button>
                    <button class="text-[var(--color-text-medium)] hover:text-[var(--color-primary-green)]" onclick="toggleSubstitution(this)">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                </div>
                <div id="substitution-2" class="mt-4 p-3 bg-[var(--color-primary-green-light-bg)] border border-[var(--color-border-light)] rounded-md text-sm text-[var(--color-text-medium)] hidden">
                    <p class="font-medium mb-2">Ingredient Substitutions:</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>Honey:</strong> Replace with <em>maple syrup</em> or <em>agave nectar</em>.</li>
                        <li><strong>Lime:</strong> Use <em>lemon juice</em> for a similar tangy flavor.</li>
                    </ul>
                </div>
            </div>

            <!-- Recipe Card 3 -->
            <div class="card p-6 flex flex-col">
                <img src="https://placehold.co/400x250/E0F2F7/0A5B27?text=Recipe+3" alt="Hearty Soup" class="w-full h-40 object-cover rounded-md mb-4">
                <h2 class="text-xl font-semibold text-[var(--color-text-dark)] mb-2">Hearty Vegetable Soup</h2>
                <p class="text-[var(--color-text-medium)] text-sm mb-4">A nutritious and comforting bowl of soup.</p>
                <div class="flex items-center text-sm text-[var(--color-text-gray)] mb-4">
                    <i class="fas fa-clock mr-2"></i> 45 min
                    <i class="fas fa-fire-alt mx-4"></i> 250 kcal
                </div>
                 <div class="flex-grow"></div>
                <div class="flex justify-between items-center mt-auto">
                    <button class="btn-primary !py-2 !px-4 !text-sm">View Recipe</button>
                    <button class="text-[var(--color-text-medium)] hover:text-[var(--color-primary-green)]" onclick="toggleSubstitution(this)">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                </div>
                 <div id="substitution-3" class="mt-4 p-3 bg-[var(--color-primary-green-light-bg)] border border-[var(--color-border-light)] rounded-md text-sm text-[var(--color-text-medium)] hidden">
                    <p class="font-medium mb-2">Ingredient Substitutions:</p>
                    <ul class="list-disc list-inside space-y-1">
                        <li><strong>Vegetable broth:</strong> Substitute with <em>chicken broth</em> or <em>water</em>.</li>
                        <li><strong>Cumin:</strong> Use <em>coriander</em> or <em>ground caraway</em> for a similar warm flavor.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Recipe Details Modal (Hidden by default) -->
        <div id="recipe-details-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden z-50">
            <div class="bg-[var(--color-bg-very-light)] p-8 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative">
                <button class="absolute top-4 right-4 text-[var(--color-text-medium)] hover:text-[var(--color-primary-green)] text-2xl" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
                <h2 id="modal-recipe-title" class="text-3xl font-bold text-[var(--color-text-dark)] mb-4">Recipe Title</h2>
                <img id="modal-recipe-image" src="https://placehold.co/600x400/E0F2F7/0A5B27?text=Recipe+Image" alt="Recipe Image" class="w-full h-64 object-cover rounded-md mb-6">
                
                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-[var(--color-text-dark)] mb-2">Ingredients</h3>
                    <ul id="modal-ingredients-list" class="list-disc list-inside space-y-1 text-[var(--color-text-medium)]">
                        <!-- Ingredients will be dynamically loaded here -->
                    </ul>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-[var(--color-text-dark)] mb-2">Instructions</h3>
                    <ol id="modal-instructions-list" class="list-decimal list-inside space-y-2 text-[var(--color-text-medium)]">
                        <!-- Instructions will be dynamically loaded here -->
                    </ol>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-semibold text-[var(--color-text-dark)] mb-2">Ratings & Reviews</h3>
                    <div class="flex items-center mb-3">
                        <span id="modal-average-rating" class="text-2xl font-bold text-[var(--color-primary-green)] mr-2">4.5</span>
                        <div class="star-rating text-2xl">
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star star"></i>
                            <i class="fas fa-star-half-alt star"></i>
                        </div>
                        <span id="modal-rating-count" class="text-[var(--color-text-medium)] ml-2">(120 reviews)</span>
                    </div>
                    <p class="text-sm text-[var(--color-text-medium)] mb-4">Add your review:</p>
                    <div class="star-rating flex mb-3">
                        <i class="fas fa-star star" data-value="1"></i>
                        <i class="fas fa-star star" data-value="2"></i>
                        <i class="fas fa-star star" data-value="3"></i>
                        <i class="fas fa-star star" data-value="4"></i>
                        <i class="fas fa-star star" data-value="5"></i>
                    </div>
                    <textarea id="user-review-input" class="w-full p-3 border border-[var(--color-border-light)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-green)] mb-3" rows="3" placeholder="Write your review..."></textarea>
                    <button class="btn-primary !py-2 !px-4 !text-sm" onclick="submitReview()">Submit Review</button>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-[var(--color-bg-very-light)] py-6 text-center text-[var(--color-text-medium)] text-sm">
        <p>&copy; 2024 RecipeFinder. All rights reserved.</p>
    </footer>

    <script>
        // Function to toggle substitution suggestions
        function toggleSubstitution(button) {
            const card = button.closest('.card');
            const substitutionDiv = card.querySelector('.hidden');
            substitutionDiv.classList.toggle('hidden');
        }

        // Modal functionality
        let currentRecipeData = null;

        // Example recipe data (in a real app, this would come from an API)
        const recipes = [
            {
                id: 1,
                title: "Classic Spaghetti Carbonara",
                image: "https://placehold.co/600x400/E0F2F7/0A5B27?text=Spaghetti+Carbonara",
                ingredients: [
                    "Spaghetti (200g)",
                    "Pancetta (100g)",
                    "Eggs (2)",
                    "Parmigiano-Reggiano (50g)",
                    "Black pepper (to taste)"
                ],
                instructions: [
                    "Cook spaghetti according to package instructions.",
                    "While pasta cooks, cook pancetta in a pan until crispy. Remove and set aside.",
                    "In a bowl, whisk eggs, grated Parmigiano-Reggiano, and a generous amount of black pepper.",
                    "Toss hot pasta with the pancetta, then add the egg and cheese mixture. Mix well until creamy.",
                    "Serve immediately, adding more Parmigiano-Reggiano if desired."
                ],
                averageRating: 4.5,
                ratingCount: 120,
                reviews: [
                    { user: "ChefFan", rating: 5, comment: "Absolutely delicious and authentic!" },
                    { user: "HomeCook", rating: 4, comment: "Great recipe, easy to follow." }
                ]
            },
            {
                id: 2,
                title: "Summer Fruit Salad",
                image: "https://placehold.co/600x400/F0F8E5/0A5B27?text=Summer+Fruit+Salad",
                ingredients: [
                    "Mixed fresh fruits (e.g., strawberries, blueberries, kiwi, pineapple)",
                    "Honey (2 tbsp)",
                    "Lime juice (1 tbsp)",
                    "Fresh mint leaves (for garnish)"
                ],
                instructions: [
                    "Wash and chop all fruits into bite-sized pieces.",
                    "In a bowl, whisk together honey and lime juice.",
                    "Toss the fruits with the honey-lime dressing.",
                    "Garnish with fresh mint leaves and serve chilled."
                ],
                averageRating: 4.2,
                ratingCount: 80,
                reviews: [
                    { user: "HealthyEater", rating: 5, comment: "So refreshing and perfect for summer!" },
                    { user: "FruitLover", rating: 3, comment: "Good, but I'd prefer less honey." }
                ]
            },
            {
                id: 3,
                title: "Hearty Vegetable Soup",
                image: "https://placehold.co/600x400/E0F2F7/0A5B27?text=Hearty+Vegetable+Soup",
                ingredients: [
                    "Olive oil (2 tbsp)",
                    "Onion (1, chopped)",
                    "Garlic (2 cloves, minced)",
                    "Carrots (2, diced)",
                    "Celery (2 stalks, diced)",
                    "Potatoes (2, peeled and diced)",
                    "Mixed vegetables (e.g., zucchini, corn, green beans) (1 cup)",
                    "Vegetable broth (4 cups)",
                    "Cumin (1 tsp)",
                    "Salt and pepper (to taste)",
                    "Fresh parsley (for garnish)"
                ],
                instructions: [
                    "Heat olive oil in a large pot over medium heat. Add onion and garlic, sauté until softened.",
                    "Add carrots, celery, and potatoes. Cook for 5-7 minutes.",
                    "Stir in mixed vegetables, vegetable broth, and cumin. Bring to a boil.",
                    "Reduce heat and simmer for 20-25 minutes, until vegetables are tender.",
                    "Season with salt and pepper. Garnish with fresh parsley before serving."
                ],
                averageRating: 4.0,
                ratingCount: 95,
                reviews: [
                    { user: "SoupFan", rating: 5, comment: "Comfort food at its best!" },
                    { user: "VeggieLover", rating: 4, comment: "Very satisfying and healthy." }
                ]
            }
        ];

        // Function to open modal
        function openModal(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (!recipe) return;

            currentRecipeData = recipe;

            document.getElementById('modal-recipe-title').textContent = recipe.title;
            document.getElementById('modal-recipe-image').src = recipe.image;

            const ingredientsList = document.getElementById('modal-ingredients-list');
            ingredientsList.innerHTML = recipe.ingredients.map(ing => `<li>${ing}</li>`).join('');

            const instructionsList = document.getElementById('modal-instructions-list');
            instructionsList.innerHTML = recipe.instructions.map(instr => `<li>${instr}</li>`).join('');

            document.getElementById('modal-average-rating').textContent = recipe.averageRating.toFixed(1);
            document.getElementById('modal-rating-count').textContent = `(${recipe.ratingCount} reviews)`;

            // Set initial star rating
            const starElements = document.querySelectorAll('.star-rating.flex .star');
            starElements.forEach(star => star.classList.remove('filled'));
            for (let i = 0; i < Math.floor(recipe.averageRating); i++) {
                starElements[i].classList.add('filled');
            }
            if (recipe.averageRating % 1 !== 0) {
                starElements[Math.floor(recipe.averageRating)].classList.remove('fa-star');
                starElements[Math.floor(recipe.averageRating)].classList.add('fa-star-half-alt');
            }


            document.getElementById('recipe-details-modal').classList.remove('hidden');
        }

        // Function to close modal
        function closeModal() {
            document.getElementById('recipe-details-modal').classList.add('hidden');
            currentRecipeData = null;
        }

        // Function to submit review (simplified for demo)
        function submitReview() {
            if (currentRecipeData) {
                const ratingInput = document.querySelector('.star-rating.flex .star.filled:last-child');
                const userReview = document.getElementById('user-review-input').value;
                const currentRating = ratingInput ? parseInt(ratingInput.dataset.value) : 0;

                if (currentRating > 0 && userReview.trim() !== '') {
                    currentRecipeData.reviews.push({ user: "You", rating: currentRating, comment: userReview });
                    currentRecipeData.ratingCount++;
                    const totalStars = currentRecipeData.reviews.reduce((sum, r) => sum + r.rating, 0);
                    currentRecipeData.averageRating = totalStars / currentRecipeData.reviews.length;

                    // Update modal display
                    document.getElementById('modal-average-rating').textContent = currentRecipeData.averageRating.toFixed(1);
                    document.getElementById('modal-rating-count').textContent = `(${currentRecipeData.ratingCount} reviews)`;
                    
                    // Re-render stars
                    const starElements = document.querySelectorAll('.star-rating.flex .star');
                    starElements.forEach(star => star.classList.remove('filled'));
                    for (let i = 0; i < Math.floor(currentRecipeData.averageRating); i++) {
                        starElements[i].classList.add('filled');
                    }
                    if (currentRecipeData.averageRating % 1 !== 0) {
                        starElements[Math.floor(currentRecipeData.averageRating)].classList.remove('fa-star');
                        starElements[Math.floor(currentRecipeData.averageRating)].classList.add('fa-star-half-alt');
                    }

                    alert('Thank you for your review!');
                    document.getElementById('user-review-input').value = ''; // Clear input
                } else {
                    alert('Please select a rating and write a review.');
                }
            }
        }

        // Star rating interaction for modal
        document.querySelectorAll('.star-rating.flex .star').forEach(star => {
            star.addEventListener('click', (e) => {
                const value = parseInt(e.target.dataset.value);
                document.querySelectorAll('.star-rating.flex .star').forEach(s => {
                    s.classList.remove('filled');
                    s.classList.remove('fa-star-half-alt');
                    s.classList.add('fa-star');
                });
                for (let i = 0; i < value; i++) {
                    star.parentNode.children[i].classList.add('filled');
                }
                // If half-star, ensure the last star is half-filled
                if (value % 1 !== 0) {
                    star.parentNode.children[value - 1].classList.remove('fa-star');
                    star.parentNode.children[value - 1].classList.add('fa-star-half-alt');
                }
            });
        });

        // Add event listeners to recipe cards to open modal
        document.querySelectorAll('.card button[onclick*="openModal"]').forEach(button => {
            button.onclick = (e) => {
                e.preventDefault(); // Prevent default button behavior
                const recipeId = parseInt(e.currentTarget.closest('.card').querySelector('h2').textContent.match(/\d+/)[0]);
                openModal(recipeId);
            };
        });

        // Close modal when clicking outside
        document.getElementById('recipe-details-modal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !document.getElementById('recipe-details-modal').classList.contains('hidden')) {
                closeModal();
            }
        });

        // Placeholder for search functionality
        document.getElementById('search-recipe').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            document.querySelectorAll('.card').forEach(card => {
                const title = card.querySelector('h2').textContent.toLowerCase();
                if (title.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

    </script>
</body>
</html>